@page "/asklucas"
@using System.Collections.ObjectModel;
@using Syncfusion.Blazor.Inputs;
@using Syncfusion.Blazor.Lists

<PageTitle>Ask Lucas</PageTitle>

<div id="container">
    <div id="sample">
        <SfListView ID="list" DataSource="@DataSource" ShowHeader="true"  Height="420px"  HeaderTitle="Ask LUCAS!">
            <ListViewFieldSettings TValue="ListDataModel" Id="Id" Text="Text"></ListViewFieldSettings>
            <ListViewTemplates TValue="ListDataModel">
                <Template>
                    @{
                        ListDataModel currentData = context as ListDataModel;

                        <div class="flex item__container">
                            <div class="flex flex__1 vertical__center flex__center @(currentData.Chat == "sender" ? "flex__order__2" : "")">
                                @if (currentData.Avatar != "")
                                {
                                    <span class="e-avatar e-avatar-circle">@currentData.Avatar</span>
                                }
                                else
                                {
                                    <span class="@currentData.Pic e-avatar e-avatar-circle"></span>
                                }
                            </div>
                            <div class="flex content__container flex__8 vertical padding @(currentData.Chat == "sender" ? "right__align" : "left__align")">
                                <div class="bold">@currentData.Text</div>
                                <div class="small__font">@currentData.Contact</div>
                            </div>
                        </div>
                    }
                </Template>
            </ListViewTemplates>
        </SfListView>
        <div class="flex">
            <div class="flex__8 padding">
                <SfTextBox Placeholder="Type your message"  @ref="@SfTextBox"></SfTextBox>
            </div>
            <div class="flex__1">
                <button class="e-btn" @onclick="@OnSend">Send</button>
            </div>
        </div>
    </div>
</div>



@code {

    SfTextBox SfTextBox;
    ObservableCollection<ListDataModel> DataSource = new ObservableCollection<ListDataModel>();

    void OnSend()
    {
        if (SfTextBox.Value != "")
        {
            DataSource.Add(new ListDataModel
                {
                    Text = "Hacker",
                    Contact = SfTextBox.Value,
                    Id = new Random().Next(300, 900).ToString(),
                    Avatar = "",
                    Pic = @"pichacker",
                    Chat = "receiver"
                });
        }

    }

    public class ListDataModel
    {
        public string Id
        {
            get;
            set;
        }
        public string Chat
        {
            get;
            set;
        }
        public string Pic
        {
            get;
            set;
        }
        public string Avatar
        {
            get;
            set;
        }
        public string Text
        {
            get;
            set;
        }
        public string Contact
        {
            get;
            set;
        }
    }

}
